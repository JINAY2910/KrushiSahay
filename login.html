<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Farmer Login - Krushi Sahay</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="login-page">
    <div class="login-wrapper">
        <div class="login-container">
            <h1>Krushi Sahay</h1>
            <h2>Login</h2>
            <form id="loginForm" action="PHP/login.php" method="post">
                
                <label for="email">Email or Mobile:</label>
                <input type="text" id="email" name="email" required>
                <div id="usernameError" class="error"></div>

                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required>
                <div id="loginPasswordError" class="error"></div>

                <!-- Remember Me Checkbox -->
                <label class="remember-me">
                    <input type="checkbox" id="rememberMe" name="remember" value="1"> Remember Me
                </label>

                <input type="submit" value="Login">
            </form>
            <p>Don't have an account? <a href="register.html">Register here</a></p>
        </div>
    </div>
    <script src="javascript/login.js"></script>

    <!-- Prefill username using cookie -->
    <script>
window.onload = function() {
    const emailInput = document.getElementById('email');
    const rememberMeCheckbox = document.getElementById('rememberMe');

    // Function to get a cookie by name
    function getCookie(name) {
        let value = "; " + document.cookie;
        let parts = value.split("; " + name + "=");
        if (parts.length === 2) return parts.pop().split(";").shift();
        return "";
    }

    // Prefill email if cookie exists (decode %40 â†’ @)
    const savedUser = getCookie("username");
    if (savedUser) {
        emailInput.value = decodeURIComponent(savedUser);
        rememberMeCheckbox.checked = true;
    }

    // Optional: clear cookie if user unchecks "Remember Me" before submit
    document.getElementById('loginForm').onsubmit = function() {
        if (!rememberMeCheckbox.checked) {
            document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        }
    };
};
</script>
</body>
</html>
